<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>TransE笔记 | 呆极的Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">TransE笔记</h1><a id="logo" href="/.">呆极的Blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">TransE笔记</h1><div class="post-meta">Jul 22, 2019<span> | </span><span class="category"><a href="/categories/技术笔记/">技术笔记</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#背景介绍"><span class="toc-number">1.</span> <span class="toc-text">背景介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TransE的介绍"><span class="toc-number">2.</span> <span class="toc-text">TransE的介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TransE的思想"><span class="toc-number">3.</span> <span class="toc-text">TransE的思想</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TransE的具体过程"><span class="toc-number">4.</span> <span class="toc-text">TransE的具体过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#负样本"><span class="toc-number">5.</span> <span class="toc-text">负样本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#评价指标"><span class="toc-number">6.</span> <span class="toc-text">评价指标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">7.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number">8.</span> <span class="toc-text">References</span></a></li></ol></div></div><div class="post-content"><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>网络上已经存在了大量知识图谱，比如YOGA，WordNet，Freebase，Dbpedia等等。这些知识图谱是为了各种各样的目的建立的，因此很难用到其他系统上面。为了发挥知识图谱的graph性，也为了得到统计学习（包括机器学习和深度学习）的优势，我们需要将知识图谱嵌入（embedding）到一个低维空间里（比如10、20、50维），这就是知识表示学习。<br> 一条知识图谱可以表示为一个三元组，三元组也就是（头实体，关系，尾实体）的形式，头实体和尾实体统称为实体（entity）。举个例子：小明的爸爸是大明，表示成三元组是（小明，爸爸，大明）。</p>
<h2 id="TransE的介绍"><a href="#TransE的介绍" class="headerlink" title="TransE的介绍"></a>TransE的介绍</h2><p>TransE的作用就是将三元组翻译成向量的方法，为了简化起见，我用(h,r,t)来表示三元组，其中</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">h:</span>头实体(主体)</span><br><span class="line"><span class="symbol">r:</span>关系(谓词或属性)</span><br><span class="line"><span class="symbol">t:</span>尾实体(客体)</span><br></pre></td></tr></table></figure>

<p>我们的目标就是将图谱中所有的实体、关系用低维的嵌入向量表示出来,</p>
<p>$\vec{h}$:头实体(主体)对应的嵌入向量<br>$\vec{r}$:关系(谓词或属性)对应的嵌入向量<br>$\vec{t}$:尾实体(客体)对应的嵌入向量</p>
<p>例如，“特朗普”这个实体，就不再是用这个字符来表示了，而是用一个低维的稠密的向量。它看起来就像下面这样：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0.21</span>, <span class="number">0.14</span>, <span class="number">0.8</span>, <span class="number">0.02</span>, <span class="number">0.17</span>, <span class="number">0.44</span>, <span class="number">0.19</span>, <span class="number">0.6</span>, <span class="number">0.32</span>, <span class="number">0.07</span>]</span><br></pre></td></tr></table></figure>

<p>上面这个向量的维度是10维，真实情况下向量的维度会比这个大，但具体取多大并没有一个统一的标准，一般取为50~200左右。</p>
<h2 id="TransE的思想"><a href="#TransE的思想" class="headerlink" title="TransE的思想"></a>TransE的思想</h2><p><img src="/images/transe_model.jpg" alt="TransE Model"><br>该文章研究了在低维向量空间中嵌入实体和关系的问题。提出一个标准模型TransE，它易于训练，包含较少的参数，并且可以扩展到非常大的数据库。TransE模型认为一个正确的三元组的向量(h,r,t)会满足公式h+r=t，头实体向量加上关系向量会等于尾实体向量。如果是一个错误的三元组，那么它们的向量之间就不满足这种关系。</p>
<h2 id="TransE的具体过程"><a href="#TransE的具体过程" class="headerlink" title="TransE的具体过程"></a>TransE的具体过程</h2><p>目标是学得所有实体和关系的向量。理想情况下，一个正确的三元组的向量之间会有h+r=t的关系，而错误的三元组之间不会有这个关系。三元组的能量函数为f()，可以采取L1距离(曼哈顿距离)或者L2距离(欧几里得距离)。该能量函数通过h+r与t的距离来表示该三元组的置信度，函数值越小，则该三元组置信度越高，<br>$$ f(h,r,t) = ||h+r-t||<em>2 $$这样，我们的目标函数就为，<br>$$ min\sum{(h,r,t)\in\Delta} ,\sum{(h^{‘},r^{‘},t^{‘})\in\Delta}[\gamma + f(h,r,t) - f(h^{‘},r^{‘},t^{‘})]</em>+ $$其中，<br>$\Delta$ 表示正确的三元组集合<br>$\Delta^{‘} $表示错误的三元组集合<br>$\gamma$ 表示正负样本之间的间距，是一个常数<br>$[x]_+$ 表示max(0,x)</p>
<h2 id="负样本"><a href="#负样本" class="headerlink" title="负样本"></a>负样本</h2><p>通常我们得到的知识图谱是三元组的集合，所有在知识图谱中出现了的三元组都被看作是正例，那我们如何产生负例呢？我们通常使用替换法来获取负例。对于三元组(h,r,t)我们随机用知识图谱中的某个实体h′来替换h，或者用某个实体t′来替换t，这样我们就得到了两个负例(h′,r,t)和(h,r,t′)。为了避免出现生成的负例其实存在于知识图谱中的情况，我们可以对生成的负例进行过滤，如果它是知识图谱中的正例，那我们就不把它作为负例，而是重新生成一个负例。</p>
<h2 id="评价指标"><a href="#评价指标" class="headerlink" title="评价指标"></a>评价指标</h2><p>TransE得到每个实体和关系的向量之后，都会利用链接预测的方法来判断向量的准确性。这个方法不仅可以用于评估TransE，但凡是评估向量的质量，都可以用这个评估方法。Mean Rank越小越好，Hits@10越大越好。<br>1.Mean rank<br>首先对于每个testing triple，以预测tail entity为例，我们将（h,r,t）中的t用知识图谱中的每个实体来代替，然后通过f(h,r,t)能量函数来计算分数，这样我们可以得到一系列的分数，之后按照 升序将这些分数排列。然后，我们需要知道的是f函数值是越小越好，那么在上个排列中，排的越前越好。现在重点来了，我们去看每个 testing triple中正确答案也就是真实的t到底能在上述序列中排多少位，比如说t1排100，t2排200，t3排60…….，之后对这些排名求平均，Mean rank就得到了。<br>2.Hit@10<br>还是按照上述进行f函数值排列，然后去看每个testing triple正确答案是否排在序列的前十，如果在的话就计数+1,最终排在前十的个数/总个数就是Hit@10,Hit@5、Hit@1依此类推。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>优点：提供了一个在低维嵌入空间中对实体进行编码的简单方法；训练速度快、易于实现等；<br>缺点：不能够解决多对一和一对多关系的问题；没有区分属性与关系。（基于TransE，往后衍生了很多Trans系算法，TransC、TransH、TransA、TransD等）</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p><a href="http://crad.ict.ac.cn/CN/article/downloadArticleFile.do?attachType=PDF&id=3099" target="_blank" rel="noopener">知识表示学习研究进展</a><br><a href="https://www.utc.fr/~bordesan/dokuwiki/_media/en/transe_nips13.pdf" target="_blank" rel="noopener">Translating Embeddings for Modeling Multi-relational Data</a></p>
</div><div class="tags"><a href="/tags/知识图谱/">知识图谱</a><a href="/tags/知识表示学习/">知识表示学习</a><a href="/tags/自然语言处理/">自然语言处理</a></div><div class="post-nav"><a class="pre" href="/2019/07/23/NTN笔记/">NTN笔记</a><a class="next" href="/2019/06/29/K8S单机版部署/">K8S单机版部署</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/None/">None</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术笔记/">技术笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Golang/" style="font-size: 15px;">Golang</a> <a href="/tags/知识图谱/" style="font-size: 15px;">知识图谱</a> <a href="/tags/知识表示学习/" style="font-size: 15px;">知识表示学习</a> <a href="/tags/自然语言处理/" style="font-size: 15px;">自然语言处理</a> <a href="/tags/K8S/" style="font-size: 15px;">K8S</a> <a href="/tags/IBM/" style="font-size: 15px;">IBM</a> <a href="/tags/None/" style="font-size: 15px;">None</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/07/26/Golang入门-傻瓜安装/">Golang入门--傻瓜安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/23/NTN笔记/">NTN笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/22/TransE笔记/">TransE笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/29/K8S单机版部署/">K8S单机版部署</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/24/Just-a-test/">Just a test</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">呆极的Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>